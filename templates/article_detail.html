{% extends 'base.html' %}

{% block title %}{{ article.title }} - Drift Blog{% endblock title %}

{% block content %}
<div class="article-card p-4">
    <h1 class="mb-3">{{ article.title }}</h1>
    <p class="text-muted">
        Por <a href="{% url 'articles:author_articles' article.author.username %}">
            {{ article.author.get_full_name|default:article.author.username }}
        </a>
        · {{ article.date|date:"d M Y" }}
    </p>

    {% if article.image %}
        <img src="{{ article.image.url }}" class="img-fluid mb-4" alt="{{ article.title }}">
    {% endif %}

    <div class="article-body">
        {{ article.body|linebreaks }}
    </div>

    <hr class="my-4">

    {# ✅ Corrección: sin paréntesis en condiciones #}
    {% if user.is_authenticated and user == article.author %}
        <div class="d-flex gap-2">
            <a href="{% url 'articles:article_edit' article.pk %}" class="btn btn-warning">
                <i class="fas fa-edit"></i> Editar
            </a>
            <a href="{% url 'articles:article_delete' article.pk %}" class="btn btn-danger">
                <i class="fas fa-trash"></i> Eliminar
            </a>
        </div>
    {% elif user.is_authenticated and user.is_staff %}
        <div class="d-flex gap-2">
            <a href="{% url 'articles:article_edit' article.pk %}" class="btn btn-warning">
                <i class="fas fa-edit"></i> Editar
            </a>
            <a href="{% url 'articles:article_delete' article.pk %}" class="btn btn-danger">
                <i class="fas fa-trash"></i> Eliminar
            </a>
        </div>
    {% endif %}

    <div class="mt-4">
        <a href="{% url 'articles:article_list' %}" class="btn btn-outline">
            ← Volver a la lista
        </a>
    </div>
</div>
{% endblock content %}
